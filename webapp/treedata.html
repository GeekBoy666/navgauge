<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>Raw tree data</title>
  <meta http-equiv="content-type" content="text/html; charset=utf-8"/>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <script type="text/javascript" src="/lib/jquery-1.10.2.min.js"></script>
  <script src="/primus/primus.js"></script>
</head>
<body>
<textarea id="output" class="form-control">
</textarea>
</body>
<script>
  var treeDataPrimus = Primus.connect("http://" + window.location.host + "/?treedata=default",
      {reconnect: {
        maxDelay: 15000,
        minDelay: 500,
        retries: Infinity
      }});

  var output = $('#output');
  treeDataPrimus.on('data', function (data) {
    output.val(output.val() + JSON.stringify(data) + "\n");
  });

  var $window = $( window );
  output.height( $window.height() );
  output.width( $window.width() );
  var resizeTextarea = function() {
    output.height( $window.height() );
    output.width( $window.width() );
  };
  $window.resize(resizeTextarea);
</script>

</html>